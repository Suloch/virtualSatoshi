<!DOCTYPE html>
<head>
  <meta charset="utf-8"/>
  <title>Home</title>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
   <style media="screen">
       #memory {
      width: 1944px;
      height: 1944px;
      margin-top: auto;
      margin-left: auto;
      margin-right: auto;
      background: #fff;
    }
    .row {
      width: auto;
      height: 2px;
      background: #313131;
    }
    .square {
      width: 2px;
      height: 2px;
      margin: 0px;
      display: inline-block;
      float: left;
      background: blue;
    }
   </style>
</head>
<body>
  <canvas id="memory" width="1944" height="1944"></canvas>

</body>

<script type="text/javascript">
var colors = {'0' : 'blue', '-': 'red', '+' : 'green'};
var rows = 243;
var columns = 243;
var ctx;
$(window).on('load', function(){
  ctx = $("#memory")[0].getContext('2d');
});

$(window).on('beforeunload', function(){
  socket.close();
});
  socket = new WebSocket("ws://localhost:8000/",);
  socket.onopen = function(e) {
    console.log("[open] Connection established");
    console.log("Sending to server");
    socket.send("My name is John");
  };
  socket.onmessage = function(event) {
      var mem = event.data;
      var c = 0;
      $("#memory").empty();
      for(var i = 0; i < 1944; i+=8)
      {
        for(var j = 0; j < 1944; j+=8)
        {
          if (mem[c] == '0')
          {
            ctx.fillStyle = "#000000";
          }
          else
          {
            if(mem[c] == '-')
            {
              ctx.fillStyle = "#00FF00";
            }
            else
            {
              if(mem[c] == '+')
              {
                ctx.fillStyle = "#0000FF";
              }
              else
              {
                console.log('okay');
              }
            }
          }
          c++;
          ctx.fillRect(j, i, 8, 8);
        }
      }
  };



</script>
